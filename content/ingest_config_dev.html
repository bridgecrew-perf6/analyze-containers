<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Ingesting development data into the Information Store </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Ingesting development data into the Information Store ">
    <meta name="generator" content="docfx 2.56.2.0">
    
    <link rel="shortcut icon" href="../images/favicon.png">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                i2 Analyze Containers
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
          
          <div class="subnav navbar navbar-default">
            <div class="container hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
            <article class="content wrap" id="_content" data-uid="">
<h1 id="ingesting-development-data-into-the-information-store">Ingesting development data into the Information Store</h1>

<p>When you are developing a configuration, ingest a small amount of representative test data into the system to ensure the schema is suitable for your data and you can configure i2 Analyze to meet your requirements. For more information about ingesting data, see <a href="https://docs.i2group.com/analyze/4.4.0/data_ingestion.html">Ingesting data into the Information Store</a>.</p>
<p>Ensure that the <code>DEPLOYMENT_PATTERN</code> variable in the <code>&lt;config_name&gt;/utils/variables.sh</code> file is set to a pattern that includes the Information Store.<br>For example:</p>
<pre><code class="lang-sh">DEPLOYMENT_PATTERN=&quot;i2c_istore&quot;
</code></pre><p>Process overview:</p>
<ul>
<li>Provide a data set</li>
<li>Create the ingestion sources</li>
<li>Provide and run scripts to complete the ingestion process</li>
</ul>
<p>If you have deployed with the law enforcement schema, complete the steps in <a href="#example-ingestion-process">Example ingestion process</a> to ingest example data into your Information Store.</p>
<h2 id="data-sets">Data sets</h2>
<p>The <code>/i2a-data</code> directory is used to contain the data sets that you ingest into the Information Store of a deployment. The data that you ingest into the Information Store must conform to the Information Store schema. However, one data set can be ingested with different configs.
There is not a 1-to-1 mapping between data sets and configs. Each data set must contain at least one ingestion script. This script contains the functions that populate the staging tables with your data and calls the ETL toolkit tools that ingest the data.</p>
<p>The expected directory structure is as follows:</p>
<pre><code class="lang-sh">- i2a-data
    - &lt;data_set&gt;
        - scripts
            - &lt;script1&gt;
            - &lt;script2&gt;
</code></pre><h2 id="ingesting-data-into-the-config-dev-environment">Ingesting data into the config dev environment</h2>
<p>The <code>manageData.sh</code> script is used to manage the ingestion process in the dev environment.</p>
<p>To ingest data into the Information Store, you must create scripts that call the ETL tools that complete the actions required by i2 Analyze for you ingest data.<br>For more information, see: - <a href="tools%20and%20functions/etl_tools.html">ETL tools</a> - <a href="https://docs.i2group.com/analyze/4.4.0/data_ingestion.html">Ingesting data into the Information Store</a></p>
<ul>
<li>You can find example scripts in the <code>examples/ingestion/scripts</code> directory. These scripts demonstrate how to create staging tables, populate them, and ingest the data into the Information Store.</li>
</ul>
<p>To run scripts, the <code>manageData.sh</code> script is called as follows:</p>
<pre><code class="lang-sh">./manageData.sh -c &lt;config_name&gt; -t ingest -d &lt;data_set&gt; -s &lt;script_name&gt;
</code></pre><p>Where:</p>
<ul>
<li><code>&lt;config_name&gt;</code> is the name of the config that is currently deployed and running in the config dev environment</li>
<li><code>&lt;data_set&gt;</code> is the name of a directory in <code>i2a-data</code></li>
<li><code>&lt;script_name&gt;</code> is the name of a script in the directory specified for &lt;data_set&gt;</li>
</ul>
<h3 id="creating-ingestion-sources">Creating ingestion sources</h3>
<p>The ingestion sources for a config are contained in the configuration. Ingestion sources are defined in <code>&lt;config_name&gt;/configuration/ingestion/scripts/createIngestionSources.sh</code>.</p>
<ol>
<li>Copy the <code>examples/ingestion/scripts/createIngestionSources.sh</code> file to the <code>&lt;config_name&gt;/configuration/ingestion/scripts/</code> directory.</li>
</ol>
<p>In the script, the <code>INGESTION_SOURCES</code> array contains the name and description of 2 example sources.</p>
<pre><code class="lang-bash">INGESTION_SOURCES=(
    [Example Ingestion Source 1]=EXAMPLE_1
    [Example Ingestion Source 2]=EXAMPLE_2
)
</code></pre><p>You can modify or add to the array of ingestion sources.</p>
<p>To create the ingestion sources in the array, the <code>manageData.sh</code> script is called as follows:</p>
<pre><code class="lang-bash">./manageData.sh -c &lt;config_name&gt; -t sources
</code></pre><h2 id="example-ingestion-process">Example ingestion process</h2>
<p>The i2 Analyze minimal toolkit contains the example <code>law-enforcement-data-set-1</code> data that can be ingested when the example law enforcement schema (<code>law-enforcement-schema.xml</code>) is deployed. This contains a number of CSV files that contain the data, and a mapping.xml file. For more information about the mapping file, see <a href="https://docs.i2group.com/analyze/4.4.0/c_ingestion_mapping.html">Ingestion mapping files</a>.</p>
<p>Before you can ingest the law enforcement example data, complete the following steps to provide the data set and scripts:</p>
<ol>
<li>Copy the <code>pre-reqs/i2analyze/toolkit/examples/data/law-enforcement-data-set-1</code> directory to the <code>i2a-data</code> directory.</li>
<li><p>Copy the <code>examples/ingestion/scripts</code> directory to the <code>i2a-data/law-enforcement-data-set-1</code> directory.<br>The directory structure is as follows:</p>
<pre><code class="lang-sh">- i2a-data
    - law-enforcement-data-set-1
        - scripts
            - ingestLawEnforcementDataSet1.sh
            - createStagingTables.sh
</code></pre></li>
<li><p>Copy the <code>examples/ingestion/scripts/createIngestionSources.sh</code> file to the <code>&lt;config_name&gt;/configuration/ingestion/scripts/</code> directory.</p>
</li>
<li><p>Use the <code>manageData.sh</code> to create the ingestion sources defined in the example <code>createIngestionSources.sh</code>.<br>For example:</p>
<pre><code class="lang-sh">./manageData.sh -c config-development -t sources
</code></pre></li>
<li><p>The example scripts separate the creation of the staging tables from the ingestion of data. To ingest the example data into the config-development config, run the following commands:</p>
<pre><code class="lang-bash">./manageData.sh -c config-development -t ingest -d law-enforcement-data-set-1 -s createStagingTables.sh
./manageData.sh -c config-development -t ingest -d law-enforcement-data-set-1 -s ingestLawEnforcementDataSet1.sh
</code></pre></li>
</ol>
<h2 id="the-managedatash-script">The manageData.sh script</h2>
<p>The <code>scripts/manageData.sh</code> script is used to manage data in an environment. It can be used to run scripts that use the ETL toolkit tools, or to remove all data from the Information Store.</p>
<p>The following usage and help is provided for the <code>manageData.sh</code> script:</p>
<pre><code class="lang-sh">Usage:
  manageData.sh -c &lt;config_name&gt; -t {ingest} -d &lt;data_set&gt; -s &lt;script_name&gt; [-v]
  manageData.sh -c &lt;config_name&gt; -t {sources} [-s &lt;script_name&gt;] [-v]
  manageData.sh -c &lt;config_name&gt; -t {delete} [-v]
  manageData.sh -h

Options:
  -c &lt;config_name&gt;             Name of the config to use.
  -t {delete|ingest|sources}   The task to run. Either delete or ingest data, or add ingestion sources. Delete permanently removes all data from the database.
  -d &lt;data_set&gt;                Name of the data set to ingest.
  -s &lt;script_name&gt;             Name of the ingestion script file.
  -v                           Verbose output.
  -h                           Display the help.
</code></pre><p>After you add data to your environment, you can <a href="develop_config_dev.html">configure the rest of the configuration</a>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            &copy; N. Harris Computer Corporation (2022)
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
